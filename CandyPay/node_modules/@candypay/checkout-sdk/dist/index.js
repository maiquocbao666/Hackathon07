var D=Object.create;var p=Object.defineProperty,U=Object.defineProperties,L=Object.getOwnPropertyDescriptor,N=Object.getOwnPropertyDescriptors,E=Object.getOwnPropertyNames,k=Object.getOwnPropertySymbols,P=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var _=(o,t,r)=>t in o?p(o,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[t]=r,d=(o,t)=>{for(var r in t||(t={}))w.call(t,r)&&_(o,r,t[r]);if(k)for(var r of k(t))Y.call(t,r)&&_(o,r,t[r]);return o},y=(o,t)=>U(o,N(t)),e=(o,t)=>p(o,"name",{value:t,configurable:!0});var v=(o,t)=>{for(var r in t)p(o,r,{get:t[r],enumerable:!0})},l=(o,t,r,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of E(t))!w.call(o,a)&&a!==r&&p(o,a,{get:()=>t[a],enumerable:!(s=L(t,a))||s.enumerable});return o};var A=(o,t,r)=>(r=o!=null?D(P(o)):{},l(t||!o||!o.__esModule?p(r,"default",{value:o,enumerable:!0}):r,o)),B=o=>l(p({},"__esModule",{value:!0}),o);var n=(o,t,r)=>(_(o,typeof t!="symbol"?t+"":t,r),r);var T={};v(T,{CANDYPAY_API_URL:()=>i,CANDYPAY_CONFIG_VERSION:()=>$,CandyPay:()=>f,getSupportedTokenMintAddress:()=>I,returnPaymentURL:()=>c,verifyWebhookSignature:()=>O});module.exports=B(T);var u=A(require("axios"));var g="https://checkout.candypay.fun";var b=new Map([["sol","So11111111111111111111111111111111111111112"],["usdc","EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"],["dust","DUSTawucrTsGU8hcqRdHDCbuYhCPADMLM2VcCb8VnFnQ"],["samo","7xKXtg2CW87d97TXJSDpbD5jBkheTqA83TZRuJosgAsU"],["shdw","SHDWyBxihqiCj6YekG2GUr7wqKLeLAMK1gHZck9pL6y"],["bonk","DezXAZ8z7PnrnRJjz3wXBoRgixCa6xjnB7YaB1pPB263"]]);var I=e(o=>b.get(o),"getSupportedTokenMintAddress");var R=require("pako");var c=e((o,t)=>{let s=(0,R.deflate)(JSON.stringify({sessionId:o,publicApiKey:t})),a=Buffer.from(s).toString("base64"),C=encodeURIComponent(a);return`${g}/pay?data=${C}`},"returnPaymentURL");var $="production",i="https://candypay-checkout-production.up.railway.app/api/v1";var m=class{constructor(t,r){n(this,"network");n(this,"options");this.network=t,this.options=r}async create(t){try{let r=y(d({},t),{network:this.network,config:this.options.config}),s=await u.default.post(`${i}/session`,r,{headers:{Authorization:`Bearer ${this.options.api_keys.private_api_key}`}});return s.data.payment_url=c(s.data.session_id,this.options.api_keys.public_api_key),s.data}catch(r){throw new Error(JSON.stringify(r.response.data,null,2))}}async metadata(t){try{let r=await u.default.get(`${i}/session`,{params:{session_id:t.session_id},headers:{Authorization:`Bearer ${this.options.api_keys.public_api_key}`}});return r.data.payment_url=c(r.data.session_id,this.options.api_keys.public_api_key),r.data}catch(r){throw new Error(JSON.stringify(r.response.data,null,2))}}generatePaymentURL(t){return c(t.session_id,this.options.api_keys.public_api_key)}};e(m,"Session");var x=A(require("axios"));var h=class{constructor(t,r){n(this,"network");n(this,"options");this.network=t,this.options=r}async create(t){try{let r=y(d({},t),{network:this.network,config:this.options.config,is_intent:!0});return(await x.default.post(`${i}/intent`,r,{headers:{Authorization:`Bearer ${this.options.api_keys.private_api_key}`}})).data}catch(r){throw new Error(JSON.stringify(r.response.data,null,2))}}async metadata(t){try{return(await x.default.get(`${i}/intent`,{params:{intent_id:t.intent_id},headers:{Authorization:`Bearer ${this.options.api_keys.public_api_key}`}})).data}catch(r){throw new Error(JSON.stringify(r.response.data,null,2))}}};e(h,"PaymentIntent");var f=class{constructor(t){n(this,"session");n(this,"paymentIntent");this.session=new m(t.network,t),this.paymentIntent=new h(t.network,t)}};e(f,"CandyPay");var S=require("svix");var O=e(async o=>{let t=new S.Webhook(o.webhook_secret);try{await t.verify(o.payload,o.headers)}catch(r){throw new Error("Invalid webhook signature")}},"verifyWebhookSignature");0&&(module.exports={CANDYPAY_API_URL,CANDYPAY_CONFIG_VERSION,CandyPay,getSupportedTokenMintAddress,returnPaymentURL,verifyWebhookSignature});
//# sourceMappingURL=index.js.map