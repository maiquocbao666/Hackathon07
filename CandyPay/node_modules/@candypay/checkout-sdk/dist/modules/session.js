var A=Object.create;var a=Object.defineProperty,R=Object.defineProperties,g=Object.getOwnPropertyDescriptor,C=Object.getOwnPropertyDescriptors,b=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,D=Object.getPrototypeOf,h=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var c=(e,t,o)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,m=(e,t)=>{for(var o in t||(t={}))h.call(t,o)&&c(e,o,t[o]);if(u)for(var o of u(t))P.call(t,o)&&c(e,o,t[o]);return e},k=(e,t)=>R(e,C(t)),n=(e,t)=>a(e,"name",{value:t,configurable:!0});var U=(e,t)=>{for(var o in t)a(e,o,{get:t[o],enumerable:!0})},f=(e,t,o,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of b(t))!h.call(e,s)&&s!==o&&a(e,s,{get:()=>t[s],enumerable:!(r=g(t,s))||r.enumerable});return e};var L=(e,t,o)=>(o=e!=null?A(D(e)):{},f(t||!e||!e.__esModule?a(o,"default",{value:e,enumerable:!0}):o,e)),N=e=>f(a({},"__esModule",{value:!0}),e);var d=(e,t,o)=>(c(e,typeof t!="symbol"?t+"":t,o),o);var S={};U(S,{Session:()=>p});module.exports=N(S);var _=L(require("axios"));var l="https://checkout.candypay.fun";var w=require("pako");var i=n((e,t)=>{let r=(0,w.deflate)(JSON.stringify({sessionId:e,publicApiKey:t})),s=Buffer.from(r).toString("base64"),x=encodeURIComponent(s);return`${l}/pay?data=${x}`},"returnPaymentURL");var y="https://candypay-checkout-production.up.railway.app/api/v1";var p=class{constructor(t,o){d(this,"network");d(this,"options");this.network=t,this.options=o}async create(t){try{let o=k(m({},t),{network:this.network,config:this.options.config}),r=await _.default.post(`${y}/session`,o,{headers:{Authorization:`Bearer ${this.options.api_keys.private_api_key}`}});return r.data.payment_url=i(r.data.session_id,this.options.api_keys.public_api_key),r.data}catch(o){throw new Error(JSON.stringify(o.response.data,null,2))}}async metadata(t){try{let o=await _.default.get(`${y}/session`,{params:{session_id:t.session_id},headers:{Authorization:`Bearer ${this.options.api_keys.public_api_key}`}});return o.data.payment_url=i(o.data.session_id,this.options.api_keys.public_api_key),o.data}catch(o){throw new Error(JSON.stringify(o.response.data,null,2))}}generatePaymentURL(t){return i(t.session_id,this.options.api_keys.public_api_key)}};n(p,"Session");0&&(module.exports={Session});
//# sourceMappingURL=session.js.map