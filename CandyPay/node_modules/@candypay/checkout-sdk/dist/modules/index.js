var C=Object.create;var n=Object.defineProperty,b=Object.defineProperties,D=Object.getOwnPropertyDescriptor,U=Object.getOwnPropertyDescriptors,L=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,N=Object.getPrototypeOf,w=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var u=(r,t,o)=>t in r?n(r,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):r[t]=o,c=(r,t)=>{for(var o in t||(t={}))w.call(t,o)&&u(r,o,t[o]);if(f)for(var o of f(t))P.call(t,o)&&u(r,o,t[o]);return r},d=(r,t)=>b(r,U(t)),a=(r,t)=>n(r,"name",{value:t,configurable:!0});var S=(r,t)=>{for(var o in t)n(r,o,{get:t[o],enumerable:!0})},l=(r,t,o,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of L(t))!w.call(r,s)&&s!==o&&n(r,s,{get:()=>t[s],enumerable:!(e=D(t,s))||e.enumerable});return r};var A=(r,t,o)=>(o=r!=null?C(N(r)):{},l(t||!r||!r.__esModule?n(o,"default",{value:r,enumerable:!0}):o,r)),Y=r=>l(n({},"__esModule",{value:!0}),r);var i=(r,t,o)=>(u(r,typeof t!="symbol"?t+"":t,o),o);var B={};S(B,{PaymentIntent:()=>h,Session:()=>y});module.exports=Y(B);var m=A(require("axios"));var x="https://checkout.candypay.fun";var g=require("pako");var _=a((r,t)=>{let e=(0,g.deflate)(JSON.stringify({sessionId:r,publicApiKey:t})),s=Buffer.from(e).toString("base64"),R=encodeURIComponent(s);return`${x}/pay?data=${R}`},"returnPaymentURL");var p="https://candypay-checkout-production.up.railway.app/api/v1";var y=class{constructor(t,o){i(this,"network");i(this,"options");this.network=t,this.options=o}async create(t){try{let o=d(c({},t),{network:this.network,config:this.options.config}),e=await m.default.post(`${p}/session`,o,{headers:{Authorization:`Bearer ${this.options.api_keys.private_api_key}`}});return e.data.payment_url=_(e.data.session_id,this.options.api_keys.public_api_key),e.data}catch(o){throw new Error(JSON.stringify(o.response.data,null,2))}}async metadata(t){try{let o=await m.default.get(`${p}/session`,{params:{session_id:t.session_id},headers:{Authorization:`Bearer ${this.options.api_keys.public_api_key}`}});return o.data.payment_url=_(o.data.session_id,this.options.api_keys.public_api_key),o.data}catch(o){throw new Error(JSON.stringify(o.response.data,null,2))}}generatePaymentURL(t){return _(t.session_id,this.options.api_keys.public_api_key)}};a(y,"Session");var k=A(require("axios"));var h=class{constructor(t,o){i(this,"network");i(this,"options");this.network=t,this.options=o}async create(t){try{let o=d(c({},t),{network:this.network,config:this.options.config,is_intent:!0});return(await k.default.post(`${p}/intent`,o,{headers:{Authorization:`Bearer ${this.options.api_keys.private_api_key}`}})).data}catch(o){throw new Error(JSON.stringify(o.response.data,null,2))}}async metadata(t){try{return(await k.default.get(`${p}/intent`,{params:{intent_id:t.intent_id},headers:{Authorization:`Bearer ${this.options.api_keys.public_api_key}`}})).data}catch(o){throw new Error(JSON.stringify(o.response.data,null,2))}}};a(h,"PaymentIntent");0&&(module.exports={PaymentIntent,Session});
//# sourceMappingURL=index.js.map