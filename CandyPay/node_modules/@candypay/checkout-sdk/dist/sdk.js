var C=Object.create;var i=Object.defineProperty,D=Object.defineProperties,U=Object.getOwnPropertyDescriptor,L=Object.getOwnPropertyDescriptors,N=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,S=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var m=(r,t,e)=>t in r?i(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,_=(r,t)=>{for(var e in t||(t={}))l.call(t,e)&&m(r,e,t[e]);if(f)for(var e of f(t))P.call(t,e)&&m(r,e,t[e]);return r},h=(r,t)=>D(r,L(t)),s=(r,t)=>i(r,"name",{value:t,configurable:!0});var Y=(r,t)=>{for(var e in t)i(r,e,{get:t[e],enumerable:!0})},x=(r,t,e,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of N(t))!l.call(r,a)&&a!==e&&i(r,a,{get:()=>t[a],enumerable:!(o=U(t,a))||o.enumerable});return r};var A=(r,t,e)=>(e=r!=null?C(S(r)):{},x(t||!r||!r.__esModule?i(e,"default",{value:r,enumerable:!0}):e,r)),B=r=>x(i({},"__esModule",{value:!0}),r);var n=(r,t,e)=>(m(r,typeof t!="symbol"?t+"":t,e),e);var E={};Y(E,{CandyPay:()=>y});module.exports=B(E);var k=A(require("axios"));var g="https://checkout.candypay.fun";var R=require("pako");var u=s((r,t)=>{let o=(0,R.deflate)(JSON.stringify({sessionId:r,publicApiKey:t})),a=Buffer.from(o).toString("base64"),b=encodeURIComponent(a);return`${g}/pay?data=${b}`},"returnPaymentURL");var p="https://candypay-checkout-production.up.railway.app/api/v1";var c=class{constructor(t,e){n(this,"network");n(this,"options");this.network=t,this.options=e}async create(t){try{let e=h(_({},t),{network:this.network,config:this.options.config}),o=await k.default.post(`${p}/session`,e,{headers:{Authorization:`Bearer ${this.options.api_keys.private_api_key}`}});return o.data.payment_url=u(o.data.session_id,this.options.api_keys.public_api_key),o.data}catch(e){throw new Error(JSON.stringify(e.response.data,null,2))}}async metadata(t){try{let e=await k.default.get(`${p}/session`,{params:{session_id:t.session_id},headers:{Authorization:`Bearer ${this.options.api_keys.public_api_key}`}});return e.data.payment_url=u(e.data.session_id,this.options.api_keys.public_api_key),e.data}catch(e){throw new Error(JSON.stringify(e.response.data,null,2))}}generatePaymentURL(t){return u(t.session_id,this.options.api_keys.public_api_key)}};s(c,"Session");var w=A(require("axios"));var d=class{constructor(t,e){n(this,"network");n(this,"options");this.network=t,this.options=e}async create(t){try{let e=h(_({},t),{network:this.network,config:this.options.config,is_intent:!0});return(await w.default.post(`${p}/intent`,e,{headers:{Authorization:`Bearer ${this.options.api_keys.private_api_key}`}})).data}catch(e){throw new Error(JSON.stringify(e.response.data,null,2))}}async metadata(t){try{return(await w.default.get(`${p}/intent`,{params:{intent_id:t.intent_id},headers:{Authorization:`Bearer ${this.options.api_keys.public_api_key}`}})).data}catch(e){throw new Error(JSON.stringify(e.response.data,null,2))}}};s(d,"PaymentIntent");var y=class{constructor(t){n(this,"session");n(this,"paymentIntent");this.session=new c(t.network,t),this.paymentIntent=new d(t.network,t)}};s(y,"CandyPay");0&&(module.exports={CandyPay});
//# sourceMappingURL=sdk.js.map